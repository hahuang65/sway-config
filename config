# Mod1 is left alt
set $mod Mod1

# You can get the names of your outputs by running: swaymsg -t get_outputs
set $laptop_monitor 'eDP-1'
set $external_monitor 'DP-1'

output $laptop_monitor scale 1
output $laptop_monitor resolution 3840x2160 position 0 0
output $external_monitor scale 1
# This MUST be set to 1920x1080, with kanshi's config set to 3840x2160 for the correct resolution to apply when docking.
# See the next comment paragraph for the details on the bug
output $external_monitor resolution 1920x1080 position 0 0

# Because of a bug in wlroots, we need to use `sway-git`, which comes with `wlroots-git`
# This allows usage of 4K external monitors (otherwise, only 1080p), by setting the `wlroots.conf` file
# https://github.com/swaywm/wlroots/issues/1877
# https://github.com/swaywm/sway/issues/5235

# Kanshi
exec kanshi

# You can get the names of your inputs by running: swaymsg -t get_inputs
input type:keyboard {
  # See /usr/share/X11/xkb/rules/xorg.lst for options

  # Capslock -> Ctrl
  xkb_options ctrl:nocaps
}

# Touchpad configuration
# Read `man 5 sway-input` for more information about this section.
input "1739:30383:DELL07E6:00_06CB:76AF_Touchpad" {
  dwt enabled
  tap disabled
  natural_scroll disabled
  middle_emulation disabled
  scroll_method two_finger
  click_method clickfinger
}

set $term kitty
set $launcher wofi
set $bar waybar

# Disable focus-follows-mouse
focus_follows_mouse no

# Wallpaper
output "*" bg $HOME/Pictures/Wallpapers/Dracula.png fill

# Borders and gaps
default_border pixel 2
gaps inner 10
gaps outer 10

# Scratchpads
bindsym $mod+s exec $HOME/.scripts/scratchpad
bindsym $mod+n exec $HOME/.scripts/notepad
bindsym $mod+d exec $HOME/.scripts/docs

# Start a terminal
bindsym $mod+Return exec $term

# Kill focused window
bindsym $mod+q kill

# Start your launcher
bindsym $mod+space exec $launcher

# Reload the configuration file
bindsym $mod+Shift+c reload

# Make fullscreen current window
bindsym $mod+z fullscreen

# NOTE splith in sway/i3 are different than splith in vim
# In vim :vsplit opens a window to the left/right and :split to the top/bottom
# In sway/i3 splith opens a window to the left/right and splitv to the top/bottom
# Split horizontally with `\`
bindsym $mod+backslash splith
# Split horizontally with `-`
bindsym $mod+minus splitv

# Change focused window
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

# Move focused window
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

mode "resize" {
    # h will shrink the containers width
    # l will grow the containers width
    # k will shrink the containers height
    # j will grow the containers height
    bindsym h resize shrink width 10px
    bindsym k resize grow height 10px
    bindsym j resize shrink height 10px
    bindsym l resize grow width 10px

    # Return to default mode
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"

bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+0 workspace number 4

# Move focused container to workspace
bindsym $mod+Shift+1 move container to workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3
bindsym $mod+Shift+0 move container to workspace number 4

# Bind media keys to their expected function
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -1000
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +1000
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle

bindsym XF86AudioPlay exec --no-startup-id playerctl play-pause
bindsym XF86AudioNext exec --no-startup-id playerctl next
bindsym XF86AudioPrev exec --no-startup-id playerctl previous

# Bind brightness keys to their expected function
bindsym XF86MonBrightnessUp exec --no-startup-id brightnessctl set +5%
bindsym XF86MonBrightnessDown exec --no-startup-id brightnessctl set 5%-

# Dracula Theme ======================================================
# class                 border  bground text    indicator child_border
client.focused          #50FA7B #6272A4 #F8F8F2 #6272A4   #50FA7B
client.focused_inactive #44475A #44475A #F8F8F2 #44475A   #44475A
client.unfocused        #282A36 #282A36 #BFBFBF #282A36   #282A36
client.urgent           #44475A #FF5555 #F8F8F2 #FF5555   #FF5555
client.placeholder      #282A36 #282A36 #F8F8F2 #282A36   #282A36
client.background       #F8F8F2

# Grim/Slurp
bindsym $mod+Shift+4 exec grim -g "$(slurp)" "$HOME/Pictures/$(date +'grim_%m_%d_%y.png')"

# Waybar
exec_always killall -SIGUSR2 $bar || $bar

# Idle configuration
bindsym $mod+Shift+space exec $lock

set $lock 'swaylock --daemonize --indicator --screenshots --clock --effect-greyscale --effect-pixelate 5 --grace 10' 
exec swayidle -w \
   timeout 300 $lock \
   timeout 900 'swaymsg "output * dpms off"' resume 'swaymsg "output * dpms on"' \
   before-sleep $lock 

include /etc/sway/config.d/*
